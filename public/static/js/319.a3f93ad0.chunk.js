"use strict";(self.webpackChunkrick_react_two=self.webpackChunkrick_react_two||[]).push([[319],{1319:function(t,e,r){r.r(e),r.d(e,{default:function(){return ct}});var n=r(4165),a=r(5861),c=r(885),s=r(2791),i=r(7406),u=r(7265),o={query:function(){return p.apply(this,arguments)}};function p(){return p=(0,a.Z)((0,n.Z)().mark((function t(){var e,r,a=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,u.Rc.post(i.s6.default,e);case 4:if("ok"!==(r=t.sent).status){t.next=9;break}return t.abrupt("return",r.content);case 9:return t.abrupt("return",new Error("Cannot get credits"));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])}))),p.apply(this,arguments)}var h=r(3329),l=function(t){var e=t.onClick,r=t.disabled,n=t.isLoading,a=t.children;t.className;return(0,h.jsx)("button",{className:"button",disabled:r||n,onClick:function(){e&&e()},children:n?(0,h.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,h.jsx)("span",{className:"sr-only"})}):a})},d=r(9434),f=r(2598),v=r(6943),m=r(3144),x=r(5671),y=r(2370),k=(0,m.Z)((function t(e){(0,x.Z)(this,t),this._id=e[y.B._ID],this.fullname=e[y.B.FULLNAME],this.imgUrl=e[y.B.IMG_URL]})),w="desc",E="img",Z="jobTitle",I="price",N="inStock",T="name",b="familyName",C="emails",A="mobile",_="phone",g="linkedinLink",R="agent",L="category",S="country",j="company",O="_id",M="createdAt",D="transactionHistory",P=(0,m.Z)((function t(e){(0,x.Z)(this,t),this.emails=[],this._id=e[O],this.desc=e[w],this.img=e[E],this.jobTitle=e[Z],this.price=e[I],this.inStock=e[N],this.name=e[T],this.familyName=e[b],this.mobile=e[A],this.phone=e[_],this.linkedinLink=e[g],this.category=e[L],this.country=e[S],this.company=e[j],this.createdAt=e[M],this.transactionHistory=e[D],this.agent=e[R]?new k(e[R]):null,this.emails=e[C]||[]})),U=(0,m.Z)((function t(e,r){(0,x.Z)(this,t),this.createdAt=new Date,this.contact=new P(e),this.priceInCredit=e.price/i.No,this.userId=r})),G=(0,m.Z)((function t(){(0,x.Z)(this,t)}));G.EMPTY_STRING="",G.TITLE="title",G.CATEGORY="category",G.CATEGORIES="categories",G.JOBTITLE="jobTitle",G.COUNTRY="country",G.NAME="name",G.FAMILY_NAME="familyName",G.DESC="desc",G.PRICE="price",G.IN_STOCK="inStock",G.EMAIL="email",G.PHONE="phone",G.LINKEDIN_LINK="linkedinLink",G.COMPANY="company",G._ID="_id",G.IMG_URL="imgUrl",G.IMG="img",G.COMPANIES="companies",G.JOB_TITLES="jobTitles",G.TERRITORIES="territories",G.EXPENSES="expenses",G.INCOME="income",G.PERMISSIONS="permissions",G.AGENT="agent",G.USER="user",G.IS_APPROVED="isApproved",G.CREATED_AT="createdAt",G.UPDATED_AT="updatedAt",G.BUYER="buyer",G.CONTACT_NAME="contactName",G.CONTACT_COMPANY="contactCompany",G.CONTACT_TITLE="contactTitle",G.IS_ACTIVE="isActive",G.GENDER="gender",G.EMAIL_TYPE="emailType",G.EMAIL_URL="emailUrl",G.OK="ok",G.FULLNAME="fullname",G.USERNAME="username",G.ACTION="action",G.APPROVE_STATUS="approveStatus";var B=(0,m.Z)((function t(e){(0,x.Z)(this,t),this.userId=e[y.B._ID],this.imgUrl=e[y.B.IMG_URL],this.fullname=e[y.B.FULLNAME]})),Y=(0,m.Z)((function t(e){var r=e.credit,n=e.type,a=e.user;(0,x.Z)(this,t),this.createdAt=new Date,this.userInfo=new B(a),this.type=n,this.creditId=r[G._ID],this.creditName=r.name,this.creditQuantity=r.quantity,this.packagePrice=r.price})),q=r(2202),F={query:function(){return K.apply(this,arguments)},createCreditTransaction:function(t){return H.apply(this,arguments)}};function K(){return K=(0,a.Z)((0,n.Z)().mark((function t(){var e,r,a=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,u.Rc.get(i.PC.default,e);case 4:if("ok"!==(r=t.sent).status){t.next=9;break}return t.abrupt("return",r.content);case 9:return t.abrupt("return",{error:"Cannot get credits transactions"});case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])}))),K.apply(this,arguments)}function H(){return(H=(0,a.Z)((0,n.Z)().mark((function t(e){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={user:q.W.getLoggedinUser(),credit:e,type:"credit_purchase"},t.abrupt("return",V(r));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t){var e=t.user,r=t.credit,n=t.type;return new Y({credit:r,user:e,type:n})}var J={query:function(){return W.apply(this,arguments)},create:function(t){return X.apply(this,arguments)},createOne:function(t){return Q.apply(this,arguments)},createContactPurchase:function(t){return $.apply(this,arguments)},removeContact:function(t,e){return z.apply(this,arguments)}};function W(){return W=(0,a.Z)((0,n.Z)().mark((function t(){var e,r=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:{},t.prev=1,t.next=4,u.Rc.get(i.DG.default);case 4:if("ok"!==(e=t.sent).status){t.next=9;break}return t.abrupt("return",e.content);case 9:return t.abrupt("return",new Error("Cannot get territories"));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])}))),W.apply(this,arguments)}function Q(){return(Q=(0,a.Z)((0,n.Z)().mark((function t(e){var r,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.createCreditTransaction(e);case 3:return r=t.sent,t.next=6,u.Rc.post("".concat(i.DG.default,"/create"),[r]);case 6:if("ok"!==(a=t.sent).status){t.next=11;break}return t.abrupt("return",a.content);case 11:throw new Error("Couldn't purchase credit");case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function X(){return(X=(0,a.Z)((0,n.Z)().mark((function t(e){var r,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(e.map((function(t){return F.createCreditTransaction(t)})));case 3:return r=t.sent,t.next=6,u.Rc.post("".concat(i.DG.default,"/create"),r);case 6:if("ok"!==(a=t.sent).status){t.next=11;break}return t.abrupt("return",a.content);case 11:throw new Error("Couldn't create territory");case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function $(){return($=(0,a.Z)((0,n.Z)().mark((function t(e){var r,a,c,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=q.W.getLoggedinUser()._id,a=tt(e,r),c={transaction:a,userId:r,type:v.A.contactPurchase},t.next=6,u.Rc.post(i.DG.contact,c);case 6:if("ok"!==(s=t.sent).status){t.next=9;break}return t.abrupt("return",s.content);case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function z(){return(z=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={userId:r,transactionId:e,type:v.A.contactRemove},t.next=4,u.Rc.post(i.DG.remove,a);case 4:return c=t.sent,t.abrupt("return",c.status);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function tt(t,e){return new U(t,e)}var et=r(4350),rt=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e,r){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.createOne(r);case 3:(a=t.sent)&&e((0,et.P)(a)),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}(),nt=r(7480),at=function(t){var e=t.credit,r=(0,s.useState)(),i=(0,c.Z)(r,2),u=i[0],o=(i[1],(0,d.I0)()),p=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rt(o,e);case 3:nt.Z.success("Credits Added",{position:"top-center"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),nt.Z.error("Cannot purcahse credits",{position:"top-center"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"credit-wrapper mt-3",children:[(0,h.jsxs)("div",{className:"credit-header",children:[(0,h.jsx)("p",{children:e.name}),(0,h.jsxs)("p",{children:[e.price," $"]})]}),(0,h.jsx)("div",{className:"credit-details_wrapper",children:(0,h.jsxs)("div",{className:"credit-details",children:[(0,h.jsx)("p",{children:f.j.CREDITS}),(0,h.jsx)("p",{children:e.quantity})]})}),(0,h.jsxs)("div",{className:"credit-footer",children:[(0,h.jsx)("p",{children:e.description}),(0,h.jsx)(l,{isLoading:u,onClick:function(){return p(e)},children:f.j.BUY_CREDITS})]})]},e._id)},ct=function(){var t=(0,s.useState)([]),e=(0,c.Z)(t,2),r=e[0],i=e[1];(0,s.useEffect)((function(){r.length||u()}),[]);var u=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.query();case 3:e=t.sent,i(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,h.jsx)("div",{className:"container",children:(0,h.jsx)("div",{className:"body-wrapper space-pb--120",children:r.map((function(t){return(0,h.jsx)(at,{credit:t},t._id)}))})})}}}]);
//# sourceMappingURL=319.a3f93ad0.chunk.js.map