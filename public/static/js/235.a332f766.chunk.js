"use strict";(self.webpackChunkrick_react_two=self.webpackChunkrick_react_two||[]).push([[235],{6906:function(e,t,n){n.d(t,{L:function(){return r},w:function(){return s}});var r={SOMETHING_WENT_WRONG:"Something went wrong",PLEASE_FILL_OUT_ALL_THE_FIELDS:"Please fill out all the fields",MESSAGE_SENT:"Message sent",CANNOT_SEND_MESSAGE:"Cannot send message"},s={TOP_CENTER:"top-center"}},4235:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(1413),s=n(2982),a=n(4165),c=n(5861),i=n(885),u=n(2791),o=n(1734),l=n(6355),d=n(5074),h=n(1134),p=n(9434),f=n(7406),m=n(7265),x={query:function(){return v.apply(this,arguments)},send:function(e){return N.apply(this,arguments)}};function v(){return v=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,r=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{chatId:""},e.prev=1,e.next=4,m.Rc.get(f.Q7.default,{params:t.chatId});case 4:if("ok"!==(n=e.sent).status){e.next=9;break}return e.abrupt("return",n.content);case 9:return e.abrupt("return",new Error("Cannot get messages"));case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,12]])}))),v.apply(this,arguments)}function N(){return(N=(0,c.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Rc.post(f.Q7.create,t);case 3:if("ok"!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",n.content);case 8:return e.abrupt("return",new Error("Cannot send message"));case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{behavior:"smooth"},t=function(){window.scrollTo((0,r.Z)({top:document.body.scrollHeight},e))};return(0,u.useEffect)((function(){t()}),[]),t},E=function(e,t){var n=(0,u.useRef)(!0);(0,u.useEffect)((function(){n.current?n.current=!1:e()}),t)},b=n(7480),j=n(6906),_=n(3329),g=function(){var e=(0,p.v9)((function(e){return e.user})).currentUser,t=(0,h.cI)(),n=t.register,f=t.handleSubmit,m=t.reset,v=(0,u.useState)([]),N=(0,i.Z)(v,2),g=N[0],k=N[1],T=w();(0,u.useEffect)((function(){S()}),[]),E((function(){T()}),[g]);var S=(0,u.useCallback)((0,c.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.query({chatId:e._id});case 3:(n=t.sent)&&k(n.messages),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),b.Z.error(j.L.SOMETHING_WENT_WRONG,{position:j.w.TOP_CENTER});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[]),Z=(0,u.useCallback)(function(){var t=(0,c.Z)((0,a.Z)().mark((function t(n){var r,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.text,t.prev=1,t.next=4,x.send({userId:e._id,text:r,isUserSender:!0});case 4:(c=t.sent)&&(k((function(e){return[].concat((0,s.Z)(e),[c])})),m()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),b.Z.error(j.L.SOMETHING_WENT_WRONG,{position:j.w.TOP_CENTER});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[]);return(0,_.jsxs)("div",{className:"backgrounds__white-top body-wrapper space-pb--120",children:[(0,_.jsx)(o.aG,{pageTitle:"Chat"}),(0,_.jsxs)("div",{className:"chat-area",children:[(0,_.jsx)("div",{className:"container",children:(0,_.jsx)("div",{className:"row",children:(0,_.jsx)("div",{className:"col-12",children:(0,_.jsx)("div",{className:"chat-wrap",children:(0,_.jsx)("ul",{className:"chat-list",children:g.map((function(e,t){return(0,_.jsx)("li",{children:(0,_.jsx)("div",{className:"chat".concat(e.isUserSender?"":" other-message"),children:(0,_.jsxs)("div",{className:"body",children:[(0,_.jsx)("div",{className:"image",children:(0,_.jsx)("img",{src:"/assets/img/comment/comment-1.jpg",alt:""})}),(0,_.jsxs)("div",{className:"content",children:[(0,_.jsxs)("div",{className:"head",children:[(0,_.jsx)("h5",{children:e.isUserSender?"Me":"Admin"}),(0,_.jsx)("span",{children:d.Y.formatTimestamp(new Date(e.createdAt))})]}),(0,_.jsx)("p",{children:e.content})]})]})})},t)}))})})})})}),(0,_.jsx)("div",{className:"chat-submission",children:(0,_.jsxs)("form",{onSubmit:f(Z),children:[(0,_.jsx)("input",(0,r.Z)({name:"text",type:"text",placeholder:"Type something"},n("text",{required:!0}))),(0,_.jsx)("div",{className:"buttons",children:(0,_.jsx)("button",{className:"submit",children:(0,_.jsx)(l.P58,{})})})]})})]})]})}}}]);
//# sourceMappingURL=235.a332f766.chunk.js.map